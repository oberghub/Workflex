{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Ionicons } from '@expo/vector-icons';\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { db } from \"../../database/firebase\";\nimport { useSelector } from 'react-redux';\nimport { collection, addDoc, onSnapshot, query, where, deleteDoc, doc, updateDoc } from 'firebase/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function MealScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    refreshing = _useState2[0],\n    setRefreshing = _useState2[1];\n  var user = useSelector(function (state) {\n    return state.user_data.user;\n  });\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    courseData = _useState4[0],\n    setCourseData = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    courseDocId = _useState6[0],\n    setCourseDocId = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    postureData = _useState8[0],\n    setPostureData = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    postureDocId = _useState10[0],\n    setPostureDocId = _useState10[1];\n  var mycourse = query(collection(db, 'mycourse'), where(\"uid\", \"==\", user.uid));\n  onSnapshot(mycourse, function (snapshot) {\n    setCourseData(snapshot.docs.map(function (doc) {\n      return doc.data();\n    }));\n    setCourseDocId(snapshot.docs.map(function (doc) {\n      return doc.id;\n    }));\n  });\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(View, {\n      style: [styles.shadowbox, {\n        width: \"100%\",\n        padding: 10\n      }],\n      children: _jsx(FlatList, {\n        data: courseData,\n        refreshControl: _jsx(RefreshControl, {\n          refreshing: refreshing,\n          onRefresh: function onRefresh() {\n            pullMe();\n          }\n        }),\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item,\n            index = _ref2.index;\n          return _jsxs(View, {\n            style: {\n              height: 150,\n              width: '100%',\n              borderWidth: 1,\n              borderColor: 'lightgray',\n              borderRadius: 10,\n              marginBottom: 15,\n              backgroundColor: item.backgroundColor\n            },\n            children: [_jsxs(View, {\n              style: [styles.gridItem, {\n                padding: 10,\n                paddingTop: 15\n              }],\n              children: [_jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: [styles.txtImg, {\n                    marginBottom: 15\n                  }],\n                  children: item.courseName\n                }), _jsx(TouchableOpacity, {\n                  style: {\n                    position: 'absolute',\n                    right: 0,\n                    top: 5\n                  },\n                  children: _jsx(Ionicons, {\n                    name: \"ios-trash-outline\",\n                    size: 20,\n                    color: 'black'\n                  })\n                })]\n              }), _jsx(Text, {\n                style: {\n                  fontSize: 18,\n                  fontWeight: '500'\n                },\n                children: postureData.filter(function (posture) {\n                  return posture.byCourseId == item.courseId;\n                }).length\n              })]\n            }), _jsx(View, {\n              style: {\n                flexDirection: 'column'\n              },\n              children: _jsx(Pressable, {\n                style: {\n                  width: '100%',\n                  height: 40,\n                  backgroundColor: 'lightblue',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  borderRadius: 5\n                },\n                options: function options(_ref3) {\n                  var route = _ref3.route;\n                  return {\n                    title: route.params.title\n                  };\n                },\n                children: _jsx(Ionicons, {\n                  name: \"ios-enter-outline\",\n                  size: 20,\n                  color: 'black'\n                })\n              })\n            })]\n          }, index);\n        }\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: 'white'\n  },\n  gridItem: {\n    flex: 1,\n    marginBottom: 10,\n    paddingTop: 5,\n    height: 170\n  },\n  shadowbox: {\n    flex: 1,\n    borderRadius: 10,\n    shadowColor: \"black\",\n    shadowOpacity: 0.26,\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowRadius: 10,\n    elevation: 3,\n    padding: 20,\n    justifyContent: \"flex-end\"\n  },\n  bgImage: {\n    width: \"100%\",\n    height: 250,\n    marginTop: -5,\n    borderRadius: 10\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    textAlign: 'center'\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  },\n  modalView: {\n    backgroundColor: \"white\",\n    borderRadius: 5,\n    padding: 35,\n    width: '100%',\n    height: 500,\n    alignItems: \"center\",\n    position: 'absolute',\n    bottom: 0,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.5,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  button: {\n    borderRadius: 5,\n    padding: 10,\n    elevation: 2\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 5,\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"names":["Ionicons","React","useEffect","useState","db","useSelector","collection","addDoc","onSnapshot","query","where","deleteDoc","doc","updateDoc","MealScreen","route","navigation","refreshing","setRefreshing","user","state","user_data","courseData","setCourseData","courseDocId","setCourseDocId","postureData","setPostureData","postureDocId","setPostureDocId","mycourse","uid","snapshot","docs","map","data","id","styles","container","shadowbox","width","padding","pullMe","item","index","height","borderWidth","borderColor","borderRadius","marginBottom","backgroundColor","gridItem","paddingTop","flexDirection","txtImg","courseName","position","right","top","fontSize","fontWeight","filter","posture","byCourseId","courseId","length","alignItems","justifyContent","title","params","StyleSheet","create","flex","shadowColor","shadowOpacity","shadowOffset","shadowRadius","elevation","bgImage","marginTop","textAlign","centeredView","modalView","bottom","button","textStyle","color","modalText"],"sources":["C:/Users/LENOVO/OneDrive/เอกสาร/GitHub/mdp-proj-2022/screens/Food/FoodScreen.js"],"sourcesContent":["import { Ionicons } from '@expo/vector-icons';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { StyleSheet, Text, View, ScrollView, FlatList, RefreshControl, TouchableOpacity, Pressable } from 'react-native';\r\nimport { db } from '../../database/firebase';\r\nimport { useSelector } from 'react-redux';\r\nimport { collection, addDoc, onSnapshot, query, where, deleteDoc, doc, updateDoc } from 'firebase/firestore';\r\n\r\nexport default function MealScreen({ route, navigation }) {\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const user = useSelector((state) => state.user_data.user)\r\n\r\n  const [courseData, setCourseData] = useState([])\r\n  const [courseDocId, setCourseDocId] = useState([])\r\n  const [postureData, setPostureData] = useState([])\r\n  const [postureDocId, setPostureDocId] = useState([])\r\n\r\n  const mycourse = query(collection(db, 'mycourse'), where(\"uid\", \"==\", user.uid))\r\n  onSnapshot(mycourse, (snapshot) => {\r\n    setCourseData(snapshot.docs.map(doc => doc.data()))\r\n    setCourseDocId(snapshot.docs.map(doc => doc.id))\r\n  })\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={[styles.shadowbox, { width: \"100%\", padding: 10 }]}>\r\n\r\n        <FlatList data={courseData}\r\n          refreshControl={\r\n            <RefreshControl\r\n              refreshing={refreshing}\r\n              onRefresh={() => { pullMe() }} />\r\n          }\r\n          renderItem={({ item, index }) =>\r\n            <View style={{\r\n              height: 150,\r\n              width: '100%',\r\n              borderWidth: 1,\r\n              borderColor: 'lightgray',\r\n              borderRadius: 10,\r\n              marginBottom: 15,\r\n              backgroundColor: item.backgroundColor\r\n            }} key={index}>\r\n              <View style={[styles.gridItem, { padding: 10, paddingTop: 15 }]}>\r\n                <View style={{ flexDirection: 'row', }}>\r\n                  <Text style={[styles.txtImg, { marginBottom: 15 }]}>{item.courseName}</Text>\r\n                  <TouchableOpacity style={{\r\n                    position: 'absolute',\r\n                    right: 0,\r\n                    top: 5\r\n                  }}>\r\n                    <Ionicons name='ios-trash-outline' size={20} color={'black'} />\r\n\r\n                  </TouchableOpacity>\r\n                </View>\r\n                <Text style={{ fontSize: 18, fontWeight: '500' }}>{postureData.filter(posture => posture.byCourseId == item.courseId).length}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={{ flexDirection: 'column' }}>\r\n                <Pressable style={{\r\n                  width: '100%',\r\n                  height: 40,\r\n                  backgroundColor: 'lightblue',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  borderRadius: 5\r\n                }}\r\n                  options={({ route }) => ({\r\n                    title: route.params.title,\r\n                  })}>\r\n                  <Ionicons name='ios-enter-outline' size={20} color={'black'} />\r\n                </Pressable>\r\n              </View>\r\n            </View>\r\n\r\n          } />\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: 'white'\r\n  },\r\n  gridItem: {\r\n    flex: 1,\r\n    marginBottom: 10,\r\n    paddingTop: 5,\r\n    height: 170,\r\n  },\r\n  shadowbox: {\r\n    flex: 1,\r\n    borderRadius: 10,\r\n    shadowColor: \"black\",\r\n    shadowOpacity: 0.26,\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowRadius: 10,\r\n    elevation: 3,\r\n    padding: 20,\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  bgImage: {\r\n    width: \"100%\",\r\n    height: 250,\r\n    marginTop: -5,\r\n    borderRadius: 10,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    textAlign: 'center',\r\n  },\r\n  centeredView: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginTop: 22\r\n  },\r\n  modalView: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 5,\r\n    padding: 35,\r\n    width: '100%',\r\n    height: 500,\r\n    alignItems: \"center\",\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2\r\n    },\r\n    shadowOpacity: 0.5,\r\n    shadowRadius: 4,\r\n    elevation: 5\r\n  },\r\n  button: {\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    elevation: 2\r\n  },\r\n  textStyle: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    textAlign: \"center\"\r\n  },\r\n  modalText: {\r\n    marginBottom: 5,\r\n    textAlign: \"center\"\r\n  }\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}