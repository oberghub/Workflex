{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from \"../../database/firebase\";\nimport { useDispatch } from \"react-redux\";\nimport { userdata } from \"../../userSlice\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var LoginScreen = function LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      incorrect = _useState2[0],\n      setIncorrect = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var signInAcc = function signInAcc() {\n    signInWithEmailAndPassword(auth, email, password).then(function (userCredential) {\n      var user = userCredential.user;\n      setEmail(\"\"), setPassword(\"\");\n      navigation.navigate(\"Home\");\n    }).catch(function (error) {\n      var errorMessage = error.message;\n      console.log(errorMessage);\n      setIncorrect(true);\n    });\n  };\n\n  var dispatch = useDispatch();\n  onAuthStateChanged(auth, function (user) {\n    if (user) {\n      dispatch(userdata({\n        uid: user.uid,\n        email: user.email,\n        displayName: user.displayName\n      }));\n    } else {\n      dispatch(userdata(null));\n    }\n  });\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      backgroundColor: '#69DFFF'\n    },\n    children: [_jsx(View, {\n      style: {\n        marginLeft: 20,\n        marginTop: 20\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 48,\n          fontWeight: '600',\n          color: 'white'\n        },\n        children: \"Sign In Account\"\n      })\n    }), _jsxs(View, {\n      style: {\n        width: '100%',\n        height: '80%',\n        backgroundColor: 'white',\n        borderRadius: 20,\n        position: 'absolute',\n        bottom: 0,\n        padding: 20\n      },\n      children: [incorrect ? _jsxs(View, {\n        style: {\n          width: '100%',\n          height: 50,\n          borderWidth: 1,\n          borderColor: 'red',\n          backgroundColor: '#FFC0C0',\n          alignItems: 'center',\n          paddingLeft: 20,\n          marginBottom: 20,\n          flexDirection: 'row'\n        },\n        children: [_jsx(Text, {\n          style: {\n            color: 'black'\n          },\n          children: \"Your username or password is incorrect.\"\n        }), _jsx(TouchableOpacity, {\n          style: {\n            position: 'absolute',\n            right: '5%'\n          },\n          onPress: function onPress() {\n            setIncorrect(false);\n          },\n          children: _jsx(Ionicons, {\n            name: \"ios-close-outline\",\n            size: 30,\n            color: 'black'\n          })\n        })]\n      }) : null, _jsxs(View, {\n        children: [_jsx(Text, {\n          style: {\n            marginBottom: 10,\n            fontWeight: '600'\n          },\n          children: \"Email\"\n        }), _jsx(TextInput, {\n          onChangeText: setEmail,\n          value: email,\n          style: {\n            width: '100%',\n            height: 50,\n            borderWidth: 1,\n            borderColor: 'lightgray',\n            paddingLeft: 10,\n            borderRadius: 5\n          }\n        })]\n      }), _jsxs(View, {\n        style: {\n          marginTop: 20\n        },\n        children: [_jsx(Text, {\n          style: {\n            marginBottom: 10,\n            fontWeight: '600'\n          },\n          children: \"Password\"\n        }), _jsx(TextInput, {\n          secureTextEntry: true,\n          onChangeText: setPassword,\n          value: password,\n          style: {\n            width: '100%',\n            height: 50,\n            borderWidth: 1,\n            borderColor: 'lightgray',\n            paddingLeft: 10,\n            borderRadius: 5\n          }\n        })]\n      }), _jsx(View, {\n        style: {\n          marginTop: 20\n        },\n        children: _jsx(TouchableOpacity, {\n          style: {\n            width: '100%',\n            height: 50,\n            backgroundColor: 'lightgreen',\n            borderRadius: 5,\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          onPress: function onPress() {\n            signInAcc();\n          },\n          children: _jsx(Text, {\n            style: {\n              fontWeight: '500',\n              fontSize: 18,\n              color: 'white'\n            },\n            children: \"Login\"\n          })\n        })\n      }), _jsxs(View, {\n        style: {\n          flexDirection: 'row',\n          marginTop: 10,\n          width: '100%',\n          justifyContent: 'center'\n        },\n        children: [_jsx(Text, {\n          style: {\n            color: '#757575',\n            fontWeight: '600'\n          },\n          children: \"If you haven't already an account ? \"\n        }), _jsx(TouchableOpacity, {\n          style: {\n            borderBottomWidth: 1,\n            borderBottomColor: 'blue'\n          },\n          onPress: function onPress() {\n            navigation.navigate(\"SignUp\");\n          },\n          children: _jsx(Text, {\n            style: {\n              color: 'blue',\n              fontWeight: '600'\n            },\n            children: \"Sign Up\"\n          })\n        })]\n      })]\n    })]\n  });\n};","map":{"version":3,"names":["Ionicons","React","useState","signInWithEmailAndPassword","onAuthStateChanged","auth","useDispatch","userdata","LoginScreen","navigation","incorrect","setIncorrect","email","setEmail","password","setPassword","signInAcc","then","userCredential","user","navigate","catch","error","errorMessage","message","console","log","dispatch","uid","displayName","flex","backgroundColor","marginLeft","marginTop","fontSize","fontWeight","color","width","height","borderRadius","position","bottom","padding","borderWidth","borderColor","alignItems","paddingLeft","marginBottom","flexDirection","right","justifyContent","borderBottomWidth","borderBottomColor"],"sources":["C:/mdp-proj-2022/screens/AuthScreen/LoginScreen.js"],"sourcesContent":["import { Ionicons } from \"@expo/vector-icons\"\r\nimport React, { useState } from \"react\"\r\nimport { View, Text, TextInput, TouchableOpacity } from \"react-native\"\r\nimport { signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\r\nimport { auth } from \"../../database/firebase\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { userdata } from \"../../userSlice\";\r\nexport const LoginScreen = ({navigation}) => {\r\n    const [incorrect, setIncorrect] = useState(false)\r\n\r\n    const [email, setEmail] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    const signInAcc = () => {\r\n        signInWithEmailAndPassword(auth, email, password)\r\n        .then((userCredential) => {\r\n          // Signed in \r\n          const user = userCredential.user;\r\n          setEmail(\"\"), setPassword(\"\")\r\n          navigation.navigate(\"Home\")\r\n          // ...\r\n        })\r\n        .catch((error) => {\r\n          //const errorCode = error.code;\r\n          const errorMessage = error.message;\r\n          console.log(errorMessage)\r\n          setIncorrect(true)\r\n        });\r\n    }\r\n        const dispatch = useDispatch()\r\n        onAuthStateChanged(auth, (user) => {\r\n        if(user){\r\n            // console.log(!user ? \"Login\" : \"Home\")\r\n            dispatch(userdata({\r\n                uid : user.uid,\r\n                email : user.email,\r\n                displayName : user.displayName\r\n            }))\r\n        }\r\n        else{\r\n            // console.log(\"when logout user value = \" +user)\r\n            dispatch(userdata(null))\r\n        }\r\n        })\r\n    return (\r\n        <View style={{\r\n            flex : 1,\r\n            backgroundColor : '#69DFFF'\r\n        }}>\r\n            <View style={{marginLeft : 20, marginTop : 20}}>\r\n                <Text style={{\r\n                    fontSize : 48,\r\n                    fontWeight : '600',\r\n                    color : 'white'\r\n                }}>Sign In Account</Text>\r\n            </View>\r\n            <View style={{\r\n                width : '100%',\r\n                height : '80%',\r\n                backgroundColor : 'white',\r\n                borderRadius : 20,\r\n                position : 'absolute',\r\n                bottom : 0,\r\n                padding : 20\r\n            }}>\r\n                {incorrect ? \r\n                    <View style={{\r\n                        width : '100%',\r\n                        height : 50,\r\n                        borderWidth : 1,\r\n                        borderColor : 'red',\r\n                        backgroundColor : '#FFC0C0',\r\n                        alignItems : 'center',\r\n                        paddingLeft : 20,\r\n                        marginBottom : 20,\r\n                        flexDirection : 'row'\r\n                    }}>\r\n                        <Text style={{color : 'black'}}>Your username or password is incorrect.</Text>\r\n                        <TouchableOpacity style={{position : 'absolute', right : '5%'}} onPress={() => {setIncorrect(false)}}>\r\n                            <Ionicons name=\"ios-close-outline\" size={30} color={'black'} />\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    :\r\n                    null\r\n                }\r\n                <View>\r\n                    <Text style={{marginBottom : 10, fontWeight : '600'}}>Email</Text>\r\n                    <TextInput\r\n                    onChangeText={setEmail}\r\n                    value={email}\r\n                    style={{\r\n                        width : '100%',\r\n                        height : 50,\r\n                        borderWidth : 1,\r\n                        borderColor : 'lightgray',\r\n                        paddingLeft : 10,\r\n                        borderRadius : 5\r\n                    }}/>\r\n                </View>\r\n\r\n                <View style={{marginTop : 20}}>\r\n                    <Text style={{marginBottom : 10, fontWeight : '600'}}>Password</Text>\r\n                    <TextInput secureTextEntry={true}\r\n                    onChangeText={setPassword}\r\n                    value={password}\r\n                    style={{\r\n                        width : '100%',\r\n                        height : 50,\r\n                        borderWidth : 1,\r\n                        borderColor : 'lightgray',\r\n                        paddingLeft : 10,\r\n                        borderRadius : 5\r\n                    }}>\r\n                    </TextInput>\r\n                </View>\r\n\r\n                <View style={{marginTop : 20}}>\r\n                    <TouchableOpacity style={{\r\n                        width : '100%',\r\n                        height : 50,\r\n                        backgroundColor : 'lightgreen',\r\n                        borderRadius : 5,\r\n                        justifyContent : 'center', \r\n                        alignItems : 'center'\r\n                    }} onPress={() => {signInAcc()}}>\r\n                        <Text style={{fontWeight : '500', fontSize : 18, color : 'white'}}>Login</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n                \r\n                <View style={{flexDirection : 'row', marginTop : 10, width : '100%', justifyContent : 'center'}}>\r\n                    <Text style={{color : '#757575', fontWeight : '600'}}>If you haven't already an account ? </Text>\r\n                    <TouchableOpacity style={{borderBottomWidth : 1, borderBottomColor : 'blue'}} onPress={() => {navigation.navigate(\"SignUp\")}}>\r\n                        <Text style={{color : 'blue',fontWeight : '600'}}>Sign Up</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </View>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}