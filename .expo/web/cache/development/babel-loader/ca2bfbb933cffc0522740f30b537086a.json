{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Ionicons } from '@expo/vector-icons';\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { db } from \"../../database/firebase\";\nimport { useSelector } from 'react-redux';\nimport { collection, addDoc, onSnapshot, query, where, deleteDoc, doc, updateDoc } from 'firebase/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function MealScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    courseData = _useState2[0],\n    setCourseData = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    postureData = _useState4[0],\n    setPostureData = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    refreshing = _useState6[0],\n    setRefreshing = _useState6[1];\n  var user = useSelector(function (state) {\n    return state.user_data.user;\n  });\n  var mycourse = query(collection(db, 'mycourse'), where(\"uid\", \"==\", user.uid));\n  onSnapshot(mycourse, function (snapshot) {\n    setCourseData(snapshot.docs.map(function (doc) {\n      return doc.data();\n    }));\n    setCourseDocId(snapshot.docs.map(function (doc) {\n      return doc.id;\n    }));\n  });\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(View, {\n      style: [styles.shadowbox, {\n        width: \"100%\",\n        padding: 10\n      }],\n      children: _jsx(FlatList, {\n        data: courseData,\n        refreshControl: _jsx(RefreshControl, {\n          refreshing: refreshing,\n          onRefresh: function onRefresh() {\n            pullMe();\n          }\n        }),\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item,\n            index = _ref2.index;\n          return _jsxs(View, {\n            style: {\n              height: 150,\n              width: '100%',\n              borderWidth: 1,\n              borderColor: 'lightgray',\n              borderRadius: 10,\n              marginBottom: 15,\n              backgroundColor: item.backgroundColor\n            },\n            children: [_jsxs(View, {\n              style: [styles.gridItem, {\n                padding: 10,\n                paddingTop: 15\n              }],\n              children: [_jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: [styles.txtImg, {\n                    marginBottom: 15\n                  }],\n                  children: item.courseName\n                }), _jsx(TouchableOpacity, {\n                  style: {\n                    position: 'absolute',\n                    right: 0,\n                    top: 5\n                  },\n                  children: _jsx(Ionicons, {\n                    name: \"ios-trash-outline\",\n                    size: 20,\n                    color: 'black'\n                  })\n                })]\n              }), _jsxs(Text, {\n                style: {\n                  fontSize: 18,\n                  fontWeight: '500'\n                },\n                children: [postureData.filter(function (posture) {\n                  return posture.byCourseId == item.courseId;\n                }).length, \" Posture\", sumOfSec(postureData.filter(function (data) {\n                  return data.byCourseId == item.courseId;\n                }).map(function (data) {\n                  return data.timeDuration;\n                }))]\n              })]\n            }), _jsx(View, {\n              style: {\n                flexDirection: 'column'\n              },\n              children: _jsx(Pressable, {\n                style: {\n                  width: '100%',\n                  height: 40,\n                  backgroundColor: 'lightblue',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  borderRadius: 5\n                },\n                onPress: function onPress() {\n                  navigation.navigate(\"My Course Detail\", {\n                    exerciseList: postureData,\n                    courseId: item.courseId,\n                    title: item.courseName\n                  });\n                },\n                options: function options(_ref3) {\n                  var route = _ref3.route;\n                  return {\n                    title: route.params.title\n                  };\n                },\n                children: _jsx(Ionicons, {\n                  name: \"ios-enter-outline\",\n                  size: 20,\n                  color: 'black'\n                })\n              })\n            })]\n          }, index);\n        }\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 15\n  },\n  render: {\n    backgroundColor: \"lightblue\",\n    width: \"100%\",\n    height: 100,\n    borderRadius: 5,\n    marginBottom: 5,\n    padding: 10,\n    alignItems: 'center',\n    flexDirection: 'row'\n  }\n});","map":{"version":3,"names":["Ionicons","React","useEffect","useState","db","useSelector","collection","addDoc","onSnapshot","query","where","deleteDoc","doc","updateDoc","MealScreen","route","navigation","courseData","setCourseData","postureData","setPostureData","refreshing","setRefreshing","user","state","user_data","mycourse","uid","snapshot","docs","map","data","setCourseDocId","id","styles","container","shadowbox","width","padding","pullMe","item","index","height","borderWidth","borderColor","borderRadius","marginBottom","backgroundColor","gridItem","paddingTop","flexDirection","txtImg","courseName","position","right","top","fontSize","fontWeight","filter","posture","byCourseId","courseId","length","sumOfSec","timeDuration","alignItems","justifyContent","navigate","exerciseList","title","params","StyleSheet","create","flex","render"],"sources":["C:/Users/LENOVO/OneDrive/เอกสาร/GitHub/mdp-proj-2022/screens/Food/FoodScreen.js"],"sourcesContent":["import { Ionicons } from '@expo/vector-icons';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { StyleSheet, Text, View, ScrollView, FlatList, RefreshControl, TouchableOpacity } from 'react-native';\r\nimport { db } from '../../database/firebase';\r\nimport { useSelector } from 'react-redux';\r\nimport { collection, addDoc, onSnapshot, query, where, deleteDoc, doc, updateDoc } from 'firebase/firestore';\r\n\r\nexport default function MealScreen({ route, navigation }) {\r\n  const [courseData, setCourseData] = useState([])\r\n  const [postureData, setPostureData] = useState([])\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const user = useSelector((state) => state.user_data.user)\r\n  const mycourse = query(collection(db, 'mycourse'), where(\"uid\", \"==\", user.uid))\r\n  onSnapshot(mycourse, (snapshot) => {\r\n    setCourseData(snapshot.docs.map(doc => doc.data()))\r\n    setCourseDocId(snapshot.docs.map(doc => doc.id))\r\n  })\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={[styles.shadowbox, { width: \"100%\", padding: 10 }]}>\r\n\r\n        <FlatList data={courseData}\r\n          refreshControl={\r\n            <RefreshControl\r\n              refreshing={refreshing}\r\n              onRefresh={() => { pullMe() }} />\r\n          }\r\n          renderItem={({ item, index }) =>\r\n            <View style={{\r\n              height: 150,\r\n              width: '100%',\r\n              borderWidth: 1,\r\n              borderColor: 'lightgray',\r\n              borderRadius: 10,\r\n              marginBottom: 15,\r\n              backgroundColor: item.backgroundColor\r\n            }} key={index}>\r\n              <View style={[styles.gridItem, { padding: 10, paddingTop: 15 }]}>\r\n                <View style={{ flexDirection: 'row', }}>\r\n                  <Text style={[styles.txtImg, { marginBottom: 15 }]}>{item.courseName}</Text>\r\n                  <TouchableOpacity style={{\r\n                    position: 'absolute',\r\n                    right: 0,\r\n                    top: 5\r\n                  }}>\r\n                    <Ionicons name='ios-trash-outline' size={20} color={'black'} />\r\n\r\n                  </TouchableOpacity>\r\n                </View>\r\n                <Text style={{ fontSize: 18, fontWeight: '500' }}>{postureData.filter(posture => posture.byCourseId == item.courseId).length} Posture\r\n                  {sumOfSec(postureData.filter(data => data.byCourseId == item.courseId).map(data => data.timeDuration))}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={{ flexDirection: 'column' }}>\r\n                <Pressable style={{\r\n                  width: '100%',\r\n                  height: 40,\r\n                  backgroundColor: 'lightblue',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  borderRadius: 5\r\n                }}\r\n                  onPress={() => {\r\n                    navigation.navigate(\"My Course Detail\", { exerciseList: postureData, courseId: item.courseId, title: item.courseName })\r\n                  }}\r\n                  options={({ route }) => ({\r\n                    title: route.params.title,\r\n                  })}>\r\n                  <Ionicons name='ios-enter-outline' size={20} color={'black'} />\r\n                </Pressable>\r\n              </View>\r\n            </View>\r\n\r\n          } />\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 15,\r\n  },\r\n  render: {\r\n    backgroundColor: \"lightblue\",\r\n    width: \"100%\",\r\n    height: 100,\r\n    borderRadius: 5,\r\n    marginBottom: 5,\r\n    padding: 10,\r\n    alignItems: 'center',\r\n    flexDirection: 'row'\r\n  },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}