{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Ionicons } from '@expo/vector-icons';\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { db } from \"../../database/firebase\";\nimport { collection, addDoc, onSnapshot, query, where, deleteDoc, doc, updateDoc } from 'firebase/firestore';\nimport { useSelector } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function PostDeatilScreen(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      postData = _useState2[0],\n      setPostData = _useState2[1];\n\n  var _useState3 = useState(route.params.postData.postId),\n      _useState4 = _slicedToArray(_useState3, 2),\n      postId = _useState4[0],\n      setPostId = _useState4[1];\n\n  var _useState5 = useState(route.params.docId),\n      _useState6 = _slicedToArray(_useState5, 2),\n      docId = _useState6[0],\n      setDocId = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      commentData = _useState8[0],\n      setCommentData = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      commentDocId = _useState10[0],\n      setCommentDocId = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      likedData = _useState12[0],\n      setLikedData = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      likedDocId = _useState14[0],\n      setLikedDocId = _useState14[1];\n\n  var user = useSelector(function (state) {\n    return state.user_data.user;\n  });\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      newComment = _useState16[0],\n      setNewComment = _useState16[1];\n\n  var commentIdGenerate = function commentIdGenerate() {\n    return Date.now().toString(36) + Math.random().toString(36).substring(2);\n  };\n\n  useEffect(function () {\n    var q = query(collection(db, 'comment'), where(\"postId\", \"==\", postId));\n    onSnapshot(q, function (snapshot) {\n      setCommentData(snapshot.docs.map(function (doc) {\n        return doc.data();\n      }));\n      setCommentDocId(snapshot.docs.map(function (doc) {\n        return doc.id;\n      }));\n    });\n    var likeq = query(collection(db, 'likedPost'), where('postId', '==', postId));\n    onSnapshot(likeq, function (snapshot) {\n      setLikedData(snapshot.docs.map(function (doc) {\n        return doc.data();\n      }));\n      setLikedDocId(snapshot.docs.map(function (doc) {\n        return doc.id;\n      }));\n    });\n    var postq = query(collection(db, 'post'), where('postId', '==', postId));\n    onSnapshot(postq, function (snapshot) {\n      setPostData(snapshot.docs.map(function (doc) {\n        return doc.data();\n      }));\n    });\n  }, []);\n\n  var deleteAPost = function deleteAPost() {\n    Alert.alert(\"Remove\", \"Do you want to remove a Post?\", [{\n      text: 'Cancel',\n      onPress: function onPress() {\n        console.log(\"ม่ายได้ลบ งือ\");\n      },\n      style: \"cancel\"\n    }, {\n      text: \"Confirm\",\n      onPress: function onPress() {\n        try {\n          deleteDoc(doc(db, 'post', docId));\n\n          for (var i = 0; i < commentDocId.length; i++) {\n            deleteDoc(doc(db, 'comment', commentDocId[i]));\n          }\n\n          setTimeout(function () {\n            navigation.navigate('Community');\n          }, 1000);\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    }]);\n  };\n\n  var sendAComment = function sendAComment() {\n    var getDate = new Date() + \"\";\n    var date = getDate.substring(8, 10) + \" \" + getDate.substring(4, 7) + \" \" + getDate.substring(11, 15);\n    var time = getDate.substring(16, 21);\n\n    if (newComment == \"\") {\n      console.log(postId);\n    } else {\n      var commentId = commentIdGenerate();\n\n      try {\n        addDoc(collection(db, \"comment\"), {\n          postId: postId,\n          byUserName: user.displayName,\n          comment: newComment,\n          timeStamp: date + \" , \" + time,\n          commentId: commentId,\n          uid: user.uid\n        });\n      } catch (e) {\n        console.log(e);\n      }\n\n      setNewComment(\"\");\n    }\n  };\n\n  var addLiked = function addLiked(postId, docId, likeUpdate) {\n    try {\n      addDoc(collection(db, \"likedPost\"), {\n        postId: postId,\n        userName: user.displayName,\n        uid: user.uid\n      });\n      updateDoc(doc(db, \"post\", docId), {\n        likeCount: likeUpdate\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  var unLiked = function unLiked(docId, likeUpdate) {\n    try {\n      deleteDoc(doc(db, 'likedPost', likedDocId[0]));\n      updateDoc(doc(db, \"post\", docId), {\n        likeCount: likeUpdate\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(View, {\n      style: {\n        borderTopWidth: 1,\n        borderLeftWidth: 1,\n        borderRightWidth: 1,\n        borderColor: 'lightgray',\n        borderRadius: 5,\n        width: '100%',\n        height: '100%',\n        padding: 15\n      },\n      children: [_jsxs(View, {\n        style: {\n          width: '100%',\n          height: 'auto'\n        },\n        children: [_jsxs(View, {\n          style: {\n            flexDirection: 'row',\n            width: '100%'\n          },\n          children: [_jsxs(View, {\n            style: {\n              width: '50%',\n              flexDirection: 'row'\n            },\n            children: [_jsx(Text, {\n              style: {\n                fontWeight: '600'\n              },\n              children: postData.userName\n            }), postData.uid == user.uid ? _jsx(View, {\n              style: {\n                marginLeft: 10\n              },\n              children: _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  deleteAPost();\n                },\n                children: _jsx(Ionicons, {\n                  name: \"ios-trash-outline\",\n                  size: 17,\n                  color: 'lightgray'\n                })\n              })\n            }) : null]\n          }), _jsx(View, {\n            style: {\n              position: 'absolute',\n              right: 0\n            },\n            children: _jsxs(Text, {\n              children: [postData.timeStamp.split(',')[1], \" \\u0E19.\"]\n            })\n          })]\n        }), _jsx(View, {\n          style: {\n            marginTop: 17,\n            marginBottom: 17\n          },\n          children: _jsx(Text, {\n            children: postData.postTitle\n          })\n        }), _jsxs(View, {\n          style: {\n            flexDirection: 'row'\n          },\n          children: [likedData.length != 0 ? _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              unLiked(docId, postData.likeCount - 1);\n            },\n            children: _jsx(Ionicons, {\n              name: \"ios-heart\",\n              size: 22,\n              color: 'red'\n            })\n          }) : _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              addLiked(postData.postId, docId, postData.likeCount + 1);\n            },\n            children: _jsx(Ionicons, {\n              name: \"ios-heart-outline\",\n              size: 22,\n              color: 'black'\n            })\n          }), _jsx(Text, {\n            style: {\n              marginLeft: 5,\n              marginTop: 4,\n              marginRight: 10\n            },\n            children: postData.likeCount\n          }), _jsx(TouchableOpacity, {\n            children: _jsx(Ionicons, {\n              name: \"ios-chatbubble-outline\",\n              size: 22,\n              color: 'black'\n            })\n          }), _jsx(Text, {\n            style: {\n              marginLeft: 5,\n              marginTop: 4\n            },\n            children: commentData.filter(function (data) {\n              return data.postId == postData.postId;\n            }).length\n          }), _jsx(Text, {\n            style: {\n              position: 'absolute',\n              right: 0\n            },\n            children: postData.timeStamp.split(',')[0]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: {\n          flexDirection: 'row',\n          width: '100%'\n        },\n        children: [_jsx(TextInput, {\n          style: {\n            borderWidth: 1,\n            borderColor: 'lightgray',\n            borderRadius: 5,\n            width: '75%',\n            height: 40,\n            marginTop: 20,\n            paddingLeft: 10\n          },\n          placeholder: \"Write a comment\",\n          onChangeText: setNewComment,\n          value: newComment\n        }), _jsx(TouchableOpacity, {\n          style: {\n            height: 40,\n            borderRadius: 5,\n            backgroundColor: 'lightblue',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '20%',\n            position: 'absolute',\n            right: 0,\n            marginTop: 20\n          },\n          onPress: function onPress() {\n            sendAComment();\n          },\n          children: _jsx(Text, {\n            style: {\n              color: 'white',\n              fontWeight: '600',\n              fontSize: 16\n            },\n            children: \"Send\"\n          })\n        })]\n      }), _jsx(FlatList, {\n        data: commentData,\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item,\n              index = _ref2.index;\n          return _jsxs(View, {\n            style: {\n              width: '100%',\n              height: 'auto',\n              marginTop: 20,\n              borderBottomWidth: 1,\n              paddingBottom: 20,\n              borderBottomColor: 'lightgray'\n            },\n            children: [_jsxs(View, {\n              style: {\n                flexDirection: 'row'\n              },\n              children: [_jsx(Text, {\n                style: {\n                  fontWeight: '700'\n                },\n                children: item.byUserName\n              }), _jsx(Text, {\n                style: {\n                  position: 'absolute',\n                  right: 0,\n                  fontWeight: '500'\n                },\n                children: item.timeStamp\n              })]\n            }), _jsx(View, {\n              style: {\n                flexDirection: 'row',\n                marginTop: 10\n              },\n              children: _jsx(Text, {\n                children: item.comment\n              })\n            })]\n          });\n        }\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingTop: 20,\n    paddingLeft: 20,\n    paddingRight: 20\n  }\n});\n{}","map":{"version":3,"names":["useEffect","useState","Ionicons","db","collection","addDoc","onSnapshot","query","where","deleteDoc","doc","updateDoc","useSelector","PostDeatilScreen","route","navigation","postData","setPostData","params","postId","setPostId","docId","setDocId","commentData","setCommentData","commentDocId","setCommentDocId","likedData","setLikedData","likedDocId","setLikedDocId","user","state","user_data","newComment","setNewComment","commentIdGenerate","Date","now","toString","Math","random","substring","q","snapshot","docs","map","data","id","likeq","postq","deleteAPost","Alert","alert","text","onPress","console","log","style","i","length","setTimeout","navigate","e","sendAComment","getDate","date","time","commentId","byUserName","displayName","comment","timeStamp","uid","addLiked","likeUpdate","userName","likeCount","unLiked","styles","container","borderTopWidth","borderLeftWidth","borderRightWidth","borderColor","borderRadius","width","height","padding","flexDirection","fontWeight","marginLeft","position","right","split","marginTop","marginBottom","postTitle","marginRight","filter","borderWidth","paddingLeft","backgroundColor","alignItems","justifyContent","color","fontSize","item","index","borderBottomWidth","paddingBottom","borderBottomColor","StyleSheet","create","flex","paddingTop","paddingRight"],"sources":["C:/mdp-proj-2022/screens/Community/PostDetailScreen.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { TouchableOpacity } from 'react-native';\r\nimport { StyleSheet, Text, View, Alert } from 'react-native';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { TextInput } from 'react-native';\r\nimport { FlatList } from 'react-native';\r\n//Store data to firebase\r\nimport { db } from '../../database/firebase';\r\nimport { collection, addDoc, onSnapshot, query, where, deleteDoc, doc, updateDoc } from 'firebase/firestore';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport default function PostDeatilScreen({route, navigation}) {\r\n  const [postData, setPostData] = useState([])\r\n  const [postId, setPostId] = useState(route.params.postData.postId)\r\n  const [docId, setDocId] = useState(route.params.docId)\r\n\r\n  //commentData\r\n  const [commentData, setCommentData] = useState([])\r\n  const [commentDocId, setCommentDocId] = useState([])\r\n\r\n  //likedData\r\n  const [likedData, setLikedData] = useState([])\r\n  const [likedDocId, setLikedDocId] = useState([])\r\n\r\n  const user = useSelector((state) => state.user_data.user)\r\n\r\n\r\n  const [newComment, setNewComment] = useState(\"\")\r\n\r\n  const commentIdGenerate = () => {\r\n    return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n  }\r\n  \r\n  useEffect(() => {\r\n\r\n    //Query comment from postId\r\n    const q = query(collection(db, 'comment'), where(\"postId\", \"==\", postId))\r\n    onSnapshot(q, (snapshot) => {\r\n      setCommentData(snapshot.docs.map(doc => doc.data()))\r\n      setCommentDocId(snapshot.docs.map(doc => doc.id))\r\n    })\r\n\r\n    const likeq = query(collection(db, 'likedPost'), where('postId', '==', postId))\r\n    onSnapshot(likeq, (snapshot) => {\r\n      setLikedData(snapshot.docs.map(doc => doc.data()))\r\n      setLikedDocId(snapshot.docs.map(doc => doc.id))\r\n    })\r\n\r\n    const postq = query(collection(db, 'post'), where('postId', '==', postId))\r\n    onSnapshot(postq, (snapshot) => {\r\n      setPostData(snapshot.docs.map(doc => doc.data()))\r\n    })\r\n\r\n  },[])\r\n\r\n  const deleteAPost = () => {\r\n    Alert.alert(\r\n      \"Remove\",\r\n      \"Do you want to remove a Post?\",\r\n      [\r\n        {\r\n          text : 'Cancel',\r\n          onPress : () => {console.log(\"ม่ายได้ลบ งือ\")},\r\n          style : \"cancel\"\r\n        },\r\n        {\r\n          text : \"Confirm\",\r\n          onPress : () => {\r\n            try{\r\n              deleteDoc(doc(db, 'post', docId))\r\n\r\n              //Delete multiple record\r\n              for(let i=0;i<commentDocId.length;i++){\r\n                deleteDoc(doc(db, 'comment', commentDocId[i]))\r\n              }\r\n              \r\n              setTimeout(() => {\r\n                navigation.navigate('Community')\r\n              }, 1000)\r\n            }\r\n            catch(e){\r\n              console.log(e)\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    )\r\n  }\r\n\r\n  const sendAComment = () => {\r\n    let getDate = new Date()+\"\"\r\n    let date = getDate.substring(8, 10) + \" \" + getDate.substring(4, 7) + \" \" + getDate.substring(11, 15)\r\n    let time = getDate.substring(16, 21)\r\n\r\n    if(newComment == \"\"){\r\n      console.log(postId)\r\n    }\r\n    else{\r\n      const commentId = commentIdGenerate()\r\n        try{\r\n          addDoc(collection(db, \"comment\"), {\r\n            postId : postId,\r\n            byUserName : user.displayName,\r\n            comment : newComment,\r\n            timeStamp : date + \" , \" + time,\r\n            commentId : commentId,\r\n            uid : user.uid\r\n          })\r\n        }\r\n        catch(e){\r\n          console.log(e)\r\n        }\r\n      setNewComment(\"\")\r\n    }\r\n  }\r\n\r\n  const addLiked = (postId, docId, likeUpdate) => {\r\n    try{\r\n      addDoc(collection(db, \"likedPost\"), {\r\n        postId : postId,\r\n        userName : user.displayName,\r\n        uid : user.uid\r\n      })\r\n\r\n      updateDoc(doc(db, \"post\", docId), {\r\n        likeCount : likeUpdate\r\n      })\r\n    }\r\n    catch(e){\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  const unLiked = (docId, likeUpdate) => {\r\n    try{\r\n      deleteDoc(doc(db, 'likedPost', likedDocId[0]))\r\n      updateDoc(doc(db, \"post\", docId), {\r\n        likeCount : likeUpdate\r\n      })\r\n    }\r\n    catch(e){\r\n      console.log(e)\r\n    }\r\n  }\r\n  return (\r\n    <View style={styles.container}>\r\n\r\n      <View style={{\r\n        borderTopWidth : 1,\r\n        borderLeftWidth : 1,\r\n        borderRightWidth : 1,\r\n        borderColor : 'lightgray',\r\n        borderRadius : 5,\r\n        width : '100%',\r\n        height : '100%',\r\n        padding : 15\r\n      }}>\r\n        <View\r\n          style={{width : '100%',\r\n          height : 'auto'}}>\r\n          <View style={{flexDirection : 'row', width : '100%'}}>\r\n            <View style={{width : '50%', flexDirection : 'row'}}>\r\n              <Text style={{fontWeight : '600'}}>{postData.userName}</Text>\r\n              {postData.uid == user.uid ? \r\n                      <View style={{marginLeft : 10}}>\r\n                        <TouchableOpacity onPress={() => {deleteAPost()}}>\r\n                          <Ionicons name='ios-trash-outline' size={17} color={'lightgray'} />\r\n                        </TouchableOpacity>\r\n                      </View>\r\n                :\r\n                null\r\n              }\r\n            </View>\r\n            <View style={{position : 'absolute', right : 0}}>\r\n              <Text>{postData.timeStamp.split(',')[1]} น.</Text> \r\n            </View>\r\n          </View>\r\n\r\n          <View style={{marginTop : 17, marginBottom : 17}}>\r\n            <Text>{postData.postTitle}</Text>\r\n          </View>\r\n\r\n          <View style={{flexDirection : 'row',}}>\r\n          {likedData.length != 0 ? \r\n            <TouchableOpacity onPress={() => {unLiked(docId, postData.likeCount-1)}}>\r\n              <Ionicons name='ios-heart' size={22} color={'red'}/>\r\n            </TouchableOpacity>\r\n            :\r\n            <TouchableOpacity onPress={() => {addLiked(postData.postId, docId, postData.likeCount+1)}}>\r\n              <Ionicons name='ios-heart-outline' size={22} color={'black'}/>\r\n            </TouchableOpacity>\r\n          }\r\n\r\n              <Text style={{marginLeft : 5, marginTop : 4, marginRight : 10}}>{postData.likeCount}</Text>\r\n\r\n              <TouchableOpacity>\r\n                <Ionicons name='ios-chatbubble-outline' size={22} color={'black'}/>\r\n              </TouchableOpacity>\r\n\r\n              <Text style={{marginLeft : 5, marginTop : 4}}>{commentData.filter(data => data.postId == postData.postId).length}</Text>\r\n\r\n              <Text style={{position : 'absolute', right : 0}}>{postData.timeStamp.split(',')[0]}</Text>\r\n          </View>\r\n        </View>\r\n        <View style={{flexDirection : 'row', width : '100%'}}>\r\n          <TextInput style={{borderWidth : 1,\r\n                            borderColor : 'lightgray',\r\n                            borderRadius : 5,\r\n                            width : '75%',\r\n                            height : 40,\r\n                            marginTop : 20,\r\n                            paddingLeft : 10}}\r\n                      placeholder=\"Write a comment\"\r\n                      onChangeText={setNewComment}\r\n                      value={newComment} />\r\n          <TouchableOpacity style={{height : 40, \r\n                                    borderRadius : 5,\r\n                                    backgroundColor : 'lightblue', \r\n                                    alignItems : 'center', \r\n                                    justifyContent : 'center',\r\n                                    width : '20%',\r\n                                    position : 'absolute',\r\n                                    right : 0,\r\n                                    marginTop : 20}}\r\n                                    onPress={() => {sendAComment()}}>\r\n            <Text style={{color : 'white', fontWeight : '600', fontSize : 16}}>Send</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n      <FlatList data={commentData} renderItem={({item, index}) => {\r\n          return <View style={{\r\n            width : '100%',\r\n            height : 'auto',\r\n            marginTop : 20,\r\n            borderBottomWidth : 1,\r\n            paddingBottom : 20,\r\n            borderBottomColor : 'lightgray'}}>\r\n            <View style={{flexDirection : 'row'}}>\r\n              <Text style={{fontWeight : '700'}}>{item.byUserName}</Text>\r\n              <Text style={{position : 'absolute', right : 0, fontWeight : '500'}}>{item.timeStamp}</Text>\r\n            </View>\r\n            <View style={{flexDirection : 'row', marginTop : 10}}>\r\n              <Text>{item.comment}</Text>\r\n            </View>\r\n          </View> \r\n        }} />\r\n\r\n      </View>\r\n      {/* View ใหญ่ */}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingTop : 20,\r\n    paddingLeft : 20,\r\n    paddingRight : 20\r\n  },\r\n});\r\n\r\n{/* <View style={{\r\n  width : '100%',\r\n  height : 'auto',\r\n  marginTop : 20,\r\n  borderBottomWidth : 1,\r\n  paddingBottom : 20,\r\n  borderBottomColor : 'lightgray'}}>\r\n  <View style={{flexDirection : 'row'}}>\r\n    <Text style={{fontWeight : '700'}}>T0900051</Text>\r\n    <Text style={{position : 'absolute', right : 0, fontWeight : '500'}}>14 Oct 2022 Time 21:04</Text>\r\n  </View>\r\n  <View style={{flexDirection : 'row', marginTop : 10}}>\r\n    <Text>แล้วเป็นควยไรแม่เย็ดแล้วเป็นควยไรแม่เย็ดแล้วเป็นควยไรแม่เย็ดแล้วเป็นควยไรแม่เย็ดแล้วเป็นควยไรแม่เย็ดแล้วเป็นควยไรแม่เย็ดแล้วเป็นควยไรแม่เย็ด</Text>\r\n  </View>\r\n</View> */}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}